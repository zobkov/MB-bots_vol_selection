# Checklist для запуска бота

## Перед запуском

### 1. Установка зависимостей
- [ ] Python 3.11+ установлен
- [ ] PostgreSQL установлен и запущен
- [ ] Redis установлен и запущен
- [ ] `pip install -r requirements.txt` выполнен успешно

### 2. Настройка Telegram бота
- [ ] Создан бот через @BotFather
- [ ] Получен токен бота
- [ ] Токен добавлен в .env как `BOT_TOKEN`

### 3. Настройка базы данных
- [ ] Создана база данных PostgreSQL
- [ ] Настроены переменные DB_* в .env
- [ ] Миграции применены: `alembic upgrade head`

### 4. Настройка Redis
- [ ] Redis запущен (проверить: `redis-cli ping`)
- [ ] Настроены переменные REDIS_* в .env

### 5. Конфигурация
- [ ] Файл .env создан из .env.example
- [ ] Все обязательные переменные заполнены
- [ ] Файл config/selection_config.json настроен под ваши нужды

## Запуск

### Автоматический запуск
```bash
./start.sh
```

### Ручной запуск
```bash
# 1. Применить миграции
alembic upgrade head

# 2. Запустить бота
python main.py
```

## Проверка работы

### Команды для тестирования
- [ ] `/start` - открывается стартовое окно
- [ ] `/menu` - открывается главное меню
- [ ] Заполнение анкеты работает полностью
- [ ] Данные сохраняются в базу данных

### Проверка базы данных
```sql
-- Проверить создание пользователей
SELECT * FROM users;

-- Проверить заявки
SELECT * FROM applications;
```

## Возможные проблемы

### Redis не запускается
```bash
# macOS
brew services start redis

# Linux
sudo systemctl start redis-server
```

### PostgreSQL не подключается
- Проверьте настройки в .env
- Убедитесь что база данных создана
- Проверьте права доступа пользователя

### Ошибки миграций
```bash
# Сбросить миграции (ВНИМАНИЕ: удалит данные!)
alembic downgrade base
alembic upgrade head
```

### Проблемы с кодировкой
- Убедитесь что PostgreSQL использует UTF-8
- Проверьте locale системы

## Логирование

Логи выводятся в консоль. Для записи в файл:
```bash
python main.py > logs/bot.log 2>&1
```

## Мониторинг

Рекомендуется следить за:
- Использованием памяти Redis
- Размером базы данных PostgreSQL
- Логами ошибок бота
- Количеством активных пользователей

## Backup

Настройте регулярные бэкапы PostgreSQL:
```bash
pg_dump -h localhost -U your_user your_db > backup_$(date +%Y%m%d).sql
```
